# üì∫ C4-–¥—ñ–∞–≥—Ä–∞–º–∏ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –≤—ñ–¥–µ–æ

## 1. C4 Context Diagram

```mermaid
C4Context
title –°–∏—Å—Ç–µ–º–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –≤—ñ–¥–µ–æ ‚Äî –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞ –¥—ñ–∞–≥—Ä–∞–º–∞

Person(user, "–ì–ª—è–¥–∞—á", "–î–∏–≤–∏—Ç—å—Å—è –≤—ñ–¥–µ–æ, —Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫–∏, –ø–∏—à–µ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ")
Person(admin, "–ê–Ω–∞–ª—ñ—Ç–∏–∫", "–ê–Ω–∞–ª—ñ–∑—É—î –ø–æ–≤–µ–¥—ñ–Ω–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —Ç–∞ —è–∫—ñ—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç—É")

System(system, "–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –≤—ñ–¥–µ–æ", "–î–æ—Å—Ç–∞–≤–ª—è—î –≤—ñ–¥–µ–æ-–∫–æ–Ω—Ç–µ–Ω—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º, –∑–±–∏—Ä–∞—î –ø–æ–¥—ñ—ó —ñ —Ñ–æ—Ä–º—É—î —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ")

System_Ext(rec_engine, "–ó–æ–≤–Ω—ñ—à–Ω—ñ–π ML-—Å–µ—Ä–≤—ñ—Å", "–ù–∞–¥–∞—î –æ—Ü—ñ–Ω–∫—É –≤—ñ–¥–µ–æ —ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ API")
System_Ext(ad_system, "–†–µ–∫–ª–∞–º–Ω–∞ —Å–∏—Å—Ç–µ–º–∞", "–û—Ç—Ä–∏–º—É—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤–∑–∞—î–º–æ–¥—ñ—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –¥–ª—è —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥—É")
System_Ext(auth_system, "–°–µ—Ä–≤—ñ—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó", "–ü–µ—Ä–µ–≤—ñ—Ä—è—î —Ç–æ–∫–µ–Ω–∏ —ñ –∫–µ—Ä—É—î –æ–±–ª—ñ–∫–æ–≤–∏–º–∏ –∑–∞–ø–∏—Å–∞–º–∏")

Rel(user, system, "–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —á–µ—Ä–µ–∑ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –∞–±–æ –≤–µ–±")
Rel(admin, system, "–û—Ç—Ä–∏–º—É—î –∞–Ω–∞–ª—ñ—Ç–∏–∫—É")
Rel(system, rec_engine, "–í–∏–∫–ª–∏–∫–∞—î —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó")
Rel(system, ad_system, "–ù–∞–¥—Å–∏–ª–∞—î –ø–æ–¥—ñ—ó")
Rel(system, auth_system, "–ü–µ—Ä–µ–≤—ñ—Ä—è—î –¥–æ—Å—Ç—É–ø")
```

## 2. C4 Container Diagram

```mermaid
C4Container
title –°–∏—Å—Ç–µ–º–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –≤—ñ–¥–µ–æ ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–∞ –¥—ñ–∞–≥—Ä–∞–º–∞

Person(user, "–ì–ª—è–¥–∞—á", "–ö–æ—Ä–∏—Å—Ç—É—î—Ç—å—Å—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ—é: –ø–µ—Ä–µ–≥–ª—è–¥–∞—î –≤—ñ–¥–µ–æ, —Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫–∏, –∫–æ–º–µ–Ω—Ç—É—î.")

System_Boundary(system, "–í—ñ–¥–µ–æ–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞") {
    Container(frontend, "Frontend", "Next.js / Flutter", "–í–µ–± –∞–±–æ –º–æ–±—ñ–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å")
    Container(api, "Backend API", "Node.js / REST", "–û–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞")
    Container(kafka, "Kafka", "Apache Kafka", "–ß–µ—Ä–≥–∞ –ø–æ–¥—ñ–π")
    Container(stream, "–ü–æ—Ç–æ–∫–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞", "Apache Flink", "–û–±—Ä–æ–±–∫–∞ –ø–æ–¥—ñ–π —Ç–∞ –≤–∏–∫–ª–∏–∫ ML")
    Container(ml, "ML-—Å–µ—Ä–≤—ñ—Å", "Python / FastAPI", "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π–Ω–∞ –ª–æ–≥—ñ–∫–∞")
    Container(store, "–ê–Ω–∞–ª—ñ—Ç–∏—á–Ω–µ —Å—Ö–æ–≤–∏—â–µ", "MapR / HDFS", "–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è enriched –ø–æ–¥—ñ–π")
    Container(bi, "BI", "Drill / Grafana", "–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ —Ç–∞ –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è")
}

Rel(user, frontend, "–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î")
Rel(frontend, api, "–í–∏–∫–ª–∏–∫–∞—î")
Rel(api, kafka, "–ü—É–±–ª—ñ–∫—É—î –ø–æ–¥—ñ—ó")
Rel(kafka, stream, "–°—Ç—Ä—ñ–º –ø–æ–¥—ñ–π")
Rel(stream, ml, "–í–∏–∫–ª–∏–∫–∞—î –º–æ–¥–µ–ª—å")
Rel(stream, store, "–ó–∞–ø–∏—Å enriched –ø–æ–¥—ñ–π")
Rel(store, bi, "–ß–∏—Ç–∞–Ω–Ω—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–æ—é")
```

## 3. C4 Component Diagram (–¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ ‚Äú–ü–æ—Ç–æ–∫–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞‚Äù)

```mermaid
C4Component
title –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ "–ü–æ—Ç–æ–∫–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞"

Container(stream_proc, "–ü–æ—Ç–æ–∫–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞", "Apache Flink", "–û–ø—Ä–∞—Ü—å–æ–≤—É—î –ø–æ–¥—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ")

Container_Ext(kafka, "Kafka", "Apache Kafka", "–ß–µ—Ä–≥–∞ –ø–æ–¥—ñ–π")
Container_Ext(ml_service, "ML-—Å–µ—Ä–≤—ñ—Å", "Python API", "–û—Ü—ñ–Ω–∫–∞ —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó")
Container_Ext(data_lake, "–ê–Ω–∞–ª—ñ—Ç–∏—á–Ω–µ —Å—Ö–æ–≤–∏—â–µ", "HDFS / MapR", "–ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è enriched –ø–æ–¥—ñ–π")
Container_Ext(api, "Recommendation API", "Node.js", "API –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π")

Component(ingestion, "Ingestion", "Flink Source", "–ß–∏—Ç–∞—î –ø–æ–¥—ñ—ó –∑ Kafka")
Component(enrichment, "Enrichment", "Flink Operator", "–ó–±–∞–≥–∞—á—É—î –ø–æ–¥—ñ—ó –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏")
Component(scoring, "Scoring", "Flink Operator", "–í–∏–∫–ª–∏–∫–∞—î ML –¥–ª—è –æ—Ü—ñ–Ω–∫–∏")
Component(persistence, "Persistence", "Flink Sink", "–ó–∞–ø–∏—Å —É —Å—Ö–æ–≤–∏—â–µ")
Component(publish, "Publish", "Flink Sink", "–û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π")

Rel(kafka, ingestion, "–ü–µ—Ä–µ–¥–∞—î –ø–æ–¥—ñ—ó")
Rel(stream_proc, ingestion, "–ó–∞–ø—É—Å–∫–∞—î")
Rel(ingestion, enrichment, "–ü–µ—Ä–µ–¥–∞—î enriched –ø–æ–¥—ñ—ó")
Rel(enrichment, scoring, "–ù–∞–¥—Å–∏–ª–∞—î –¥–ª—è –æ—Ü—ñ–Ω–∫–∏")
Rel(scoring, ml_service, "–í–∏–∫–ª–∏–∫–∞—î ML API")
Rel(scoring, persistence, "–ü–µ—Ä–µ–¥–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç")
Rel(scoring, publish, "–û–Ω–æ–≤–ª—é—î API")
Rel(persistence, data_lake, "–ó–∞–ø–∏—Å —É data lake")
Rel(publish, api, "API –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π")
```